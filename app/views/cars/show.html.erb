
<div class="container">
  <h3><%= @car.brand %></h3>
  <br>
  <%= cl_image_tag @car.image.key, height: 300, width: 400, crop: :fill %>
  <br>
  <%= @car.description %>
  <br>
  <%= @car.price %>
  <br>
  <% if @car.availability == true %>
    <p>Available</p>
  <% else %>
    <p>Not available</p>
  <% end %>

  <h3>Book <%= @car.brand %></h3>

  <%= form_with model: [@car, @booking] do |f| %>
    <% if @booking.errors.any? %>
      <div class="errors" style="color: red;">
        <h3><%= pluralize(@booking.errors.count, "error") %> occurred:</h3>
        <ul>
          <% @booking.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="field">
      <%= f.label :start_date %>
      <%= f.date_field :start_date, min: Date.today %>
    </div>

    <div class="field">
      <%= f.label :end_date %>
      <%= f.date_field :end_date, min: Date.tomorrow %>
    </div>
    <br>
    <%= f.submit "Confirm Booking"%>
  <% end %>
  <br>
  <h3>Reviews:</h3>
  <ul class="list-group">
    <% @car.reviews.each do |review| %>
      <li class="list-group-item">
        <strong><%= review.comment %></strong><br>
        <% review.rating.to_i.times do %>
          <i class="fas fa-star text-warning"></i>
        <% end %>
        <% (5 - review.rating.to_i).times do %>
          <i class="far fa-star text-warning"></i>
        <% end %>
      </li>
    <% end %>
  </ul>
</div>
